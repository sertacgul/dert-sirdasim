<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- iOS Web App Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Dert SÄ±rdaÅŸÄ±m">
    <meta name="theme-color" content="#111827">

    <title>Dert SÄ±rdaÅŸÄ±m - Global Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+SC:wght@400;700&family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/4712/4712009.png"> 

    <style>
        body { font-family: 'Nunito', sans-serif; background-color: #111827; color: #e2e8f0; overflow: hidden; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; padding-top: env(safe-area-inset-top); }
        /* Font adjustments */
        body.lang-ja { font-family: 'Noto Sans JP', sans-serif; }
        body.lang-zh { font-family: 'Noto Sans SC', sans-serif; }
        body.lang-ar { font-family: 'Noto Sans Arabic', sans-serif; direction: rtl; }

        .app-container { width: 100%; height: 100dvh; background: linear-gradient(180deg, #1f2937 0%, #0f172a 100%); display: flex; flex-direction: column; position: relative; margin: 0 auto; max-width: 600px; }
        @media (min-width: 768px) { .app-container { border-left: 1px solid #374151; border-right: 1px solid #374151; } }

        /* Splash */
        .splash-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at center, #1e1b4b 0%, #0f172a 100%); z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 0.8s ease-out, visibility 0.8s; }
        .splash-logo { font-size: 4.5rem; background: linear-gradient(135deg, #f472b6 0%, #a78bfa 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 1rem; }
        .splash-title { font-size: 2.5rem; font-weight: 900; color: white; margin-bottom: 0.5rem; }
        .splash-subtitle { color: #94a3b8; font-size: 0.9rem; font-weight: 600; letter-spacing: 1px; }
        .splash-screen.fade-out { opacity: 0; visibility: hidden; pointer-events: none; }

        /* Modals */
        .modal-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #111827, #0f172a); z-index: 100; display: none; flex-direction: column; justify-content: center; padding: 24px; transition: opacity 0.3s ease; }
        .modal-overlay.active { display: flex; }
        .form-select { background-color: #1f2937; border: 1px solid #374151; color: white; padding: 12px; border-radius: 12px; width: 100%; margin-bottom: 12px; outline: none; transition: border-color 0.3s; font-size: 0.95rem; }
        .form-select:focus { border-color: #ec4899; }
        .lang-select-mini { background: #374151; color: white; border: 1px solid #4b5563; padding: 5px 10px; border-radius: 6px; font-size: 0.8rem; outline: none; }
        .legal-box { background: #1f2937; border: 1px solid #374151; padding: 15px; border-radius: 8px; font-size: 0.8rem; color: #9ca3af; margin-bottom: 20px; max-height: 200px; overflow-y: auto; line-height: 1.4; }

        /* Chat */
        .chat-area { flex: 1; overflow-y: auto; padding: 16px; padding-bottom: 40px; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; }
        .message-container { display: flex; flex-direction: column; width: 100%; margin-bottom: 16px; }
        .message { max-width: 85%; padding: 12px 16px; border-radius: 18px; font-size: 0.95rem; line-height: 1.5; position: relative; box-shadow: 0 1px 2px rgba(0,0,0,0.3); word-wrap: break-word; animation: popIn 0.3s ease; }
        
        .message.user { align-self: flex-end; background: linear-gradient(135deg, #ec4899, #be185d); color: white; border-bottom-right-radius: 2px; }
        body.lang-ar .message.user { align-self: flex-start; border-bottom-left-radius: 2px; border-bottom-right-radius: 18px; }
        
        .message.ai { align-self: flex-start; background: #334155; color: #f1f5f9; border-bottom-left-radius: 2px; border: 1px solid #475569; }
        body.lang-ar .message.ai { align-self: flex-end; border-bottom-right-radius: 2px; border-bottom-left-radius: 18px; }

        .message.giybet { background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border-bottom-left-radius: 2px; border: none; }
        body.lang-ar .message.giybet { margin-right: 0; margin-left: auto; border-bottom-right-radius: 2px; border-bottom-left-radius: 18px; }
        
        /* Feedback Buttons */
        .feedback-container { display: flex; gap: 15px; margin-top: 6px; margin-left: 10px; opacity: 0; animation: fadeIn 0.5s forwards 0.5s; }
        .fb-btn { cursor: pointer; color: #6b7280; font-size: 1rem; transition: transform 0.2s, color 0.2s; }
        .fb-btn:hover { color: white; transform: scale(1.2); }
        .fb-btn.liked { color: #34d399; }
        .fb-btn.disliked { color: #f87171; }

        /* Input */
        .input-area { background: rgba(31, 41, 55, 0.95); backdrop-filter: blur(10px); padding: 16px; border-top: 1px solid #374151; display: flex; flex-direction: column; gap: 10px; padding-bottom: env(safe-area-inset-bottom, 20px); }
        .send-btn-custom { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; transition: 0.2s; }
        .send-btn-custom:active { transform: scale(0.95); }
        body.lang-ar .send-btn-custom i { transform: scaleX(-1); }

        .mode-switch { display: flex; background: #111827; padding: 4px; border-radius: 10px; margin-bottom: 5px; border: 1px solid #374151; }
        .mode-btn { flex: 1; padding: 8px; text-align: center; border-radius: 8px; font-size: 0.8rem; font-weight: 700; cursor: pointer; color: #6b7280; transition: 0.3s; }
        .mode-btn.active.advice { background: #374151; color: #f472b6; }
        .mode-btn.active.gossip { background: #4c1d95; color: #e9d5ff; }

        /* Animations */
        @keyframes popIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .typing-dots span { display: inline-block; width: 6px; height: 6px; background: #cbd5e1; border-radius: 50%; margin: 0 2px; animation: typing 1.4s infinite; }
        .typing-dots span:nth-child(2) { animation-delay: 0.2s; } .typing-dots span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
    </style>
</head>
<body>

<div class="app-container">
    <!-- SPLASH -->
    <div id="splashScreen" class="splash-screen">
        <div class="splash-logo"><i class="fa-solid fa-ear-listen"></i></div>
        <h1 class="splash-title">DERT SIRDAÅIM</h1>
        <p class="splash-subtitle">ATAOL AI Techs GÃ¼vencesi Ä°le</p>
    </div>

    <!-- LEGAL MODAL -->
    <div id="legalModal" class="modal-overlay">
        <div class="w-full max-w-sm mx-auto mb-4 flex justify-end">
            <select id="legalLangSelect" class="lang-select-mini" onchange="app.changeAppLanguage(this.value)">
                <option value="tr" selected>TÃ¼rkÃ§e</option>
                <option value="en">English</option>
                <option value="de">Deutsch</option>
                <option value="fr">FranÃ§ais</option>
                <option value="es">EspaÃ±ol</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="pt">PortuguÃªs</option>
                <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                <option value="zh">ä¸­æ–‡</option>
            </select>
        </div>
        <div class="bg-gray-800 p-6 rounded-2xl border border-gray-700 w-full max-w-md mx-auto">
            <h2 id="legalTitle" class="text-xl font-bold text-white mb-4 text-center">Yasal UyarÄ±</h2>
            <div id="legalTextContent" class="legal-box"></div>
            <button id="legalBtn" onclick="app.acceptLegal()" class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 rounded-xl mt-2 transition">Kabul Ediyorum</button>
        </div>
    </div>

    <!-- PROFILE MODAL -->
    <div id="profileModal" class="modal-overlay">
        <div class="w-full max-w-sm mx-auto">
            <div class="text-center mb-6">
                <div class="w-16 h-16 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center text-white text-2xl mx-auto mb-3 shadow-lg">
                    <i id="headerIcon" class="fa-solid fa-user"></i>
                </div>
                <h2 id="profileTitle" class="text-xl font-bold text-white">Seni TanÄ±yalÄ±m</h2>
                <p id="profileSubtitle" class="text-gray-400 text-xs mt-1">YargÄ±sÄ±z, gÃ¼venli dert ortaÄŸÄ±n.</p>
            </div>
            <form onsubmit="event.preventDefault(); app.submitProfile();">
                <select id="userGender" class="form-select" onchange="app.handleGenderChange(this.value)" required></select>
                <select id="userAge" class="form-select" required></select>
                <select id="userJob" class="form-select" required></select>
                <select id="userRelation" class="form-select" required></select>
                <select id="userMood" class="form-select" required></select>
                <button type="submit" id="startBtn" class="w-full bg-gradient-to-r from-pink-600 to-purple-600 text-white font-bold py-3 rounded-xl mt-4 shadow-lg transform active:scale-95 transition">BaÅŸla</button>
            </form>
        </div>
    </div>

    <!-- APP HEADER -->
    <header class="p-4 flex items-center justify-between border-b border-gray-700 bg-gray-900 z-10 shadow-md">
        <div class="flex items-center gap-3">
            <div id="headerIconContainer" class="w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg">
                <i class="fa-solid fa-ear-listen"></i>
            </div>
            <div>
                <h1 id="appTitle" class="font-bold text-white">Dert SÄ±rdaÅŸÄ±m</h1>
                <span id="appSubtitle" class="text-xs text-pink-400">Seninle konuÅŸmak iyi gelecek</span>
            </div>
        </div>
        <button onclick="app.clearChatHistory()" class="w-10 h-10 rounded-full border border-gray-600 flex items-center justify-center text-gray-400 hover:text-white hover:bg-gray-800 transition">
            <i class="fa-solid fa-trash-can"></i>
        </button>
    </header>

    <!-- CHAT AREA -->
    <div id="chatBox" class="chat-area"></div>

    <!-- INPUT AREA -->
    <div class="input-area">
        <div class="mode-switch">
            <div id="btnAdvice" class="mode-btn active advice" onclick="app.setMode('advice')"><i class="fa-solid fa-heart mr-1"></i> <span id="labelAdvice">DertleÅŸme</span></div>
            <div id="btnGossip" class="mode-btn gossip" onclick="app.setMode('gossip')"><i class="fa-solid fa-bolt mr-1"></i> <span id="labelGossip">GÄ±ybet</span></div>
        </div>
        <div class="flex gap-2 items-end">
            <textarea id="userInput" rows="2" class="w-full bg-gray-800 text-white rounded-xl px-4 py-3 border border-gray-600 focus:border-pink-500 outline-none resize-none text-sm" placeholder="Yaz bakalÄ±m..."></textarea>
            <button id="sendBtn" onclick="app.sendMessage()" class="send-btn-custom bg-pink-600 text-white"><i class="fa-solid fa-paper-plane"></i></button>
        </div>
    </div>
</div>

<script>
// =================================================================
// 1. API KEY CONFIGURATION (SPLIT)
// =================================================================
// LÃœTFEN ANAHTARINIZI BURAYA GÄ°RÄ°NÄ°Z (PartA ve PartB'yi doldurun)
const partA = "AIzaSyA8qvQAi3Lc7MJ"; // Ã–rn: AIzaSy...
const partB = "mSuiiN3TWDICaJ7y--78"; // Ã–rn: ...KqPxg...
const apiKey = partA + partB; 

/** Visual Canvas Effect */
const CanvasEffect = {
    canvas: null, ctx: null, particles: [], animationId: null,
    init() {
        this.canvas = document.getElementById('splashCanvas');
        if (!this.canvas) return;
        this.ctx = this.canvas.getContext('2d');
        if (!this.ctx) return;
        this.resize();
        window.addEventListener('resize', () => this.resize());
        this.createParticles();
        this.animate();
    },
    resize() {
        if(this.canvas) { this.canvas.width = window.innerWidth; this.canvas.height = window.innerHeight; }
    },
    createParticles() {
        if(!this.canvas) return;
        const count = Math.floor((this.canvas.width * this.canvas.height) / 10000); 
        this.particles = [];
        for (let i = 0; i < count; i++) {
            this.particles.push({
                x: Math.random() * this.canvas.width, y: Math.random() * this.canvas.height,
                vx: (Math.random() - 0.5) * 0.5, vy: (Math.random() - 0.5) * 0.5,
                size: Math.random() * 2 + 1, alpha: Math.random() * 0.5 + 0.1
            });
        }
    },
    animate() {
        if(!this.ctx) return;
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        for (let i = 0; i < this.particles.length; i++) {
            const p = this.particles[i];
            p.x += p.vx; p.y += p.vy;
            if(p.x < 0 || p.x > this.canvas.width) p.vx *= -1;
            if(p.y < 0 || p.y > this.canvas.height) p.vy *= -1;
            this.ctx.fillStyle = `rgba(167, 139, 250, ${p.alpha})`;
            this.ctx.beginPath();
            this.ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            this.ctx.fill();
            for (let j = i; j < this.particles.length; j++) {
                const p2 = this.particles[j];
                const dx = p.x - p2.x; const dy = p.y - p2.y;
                const dist = Math.sqrt(dx*dx + dy*dy);
                if (dist < 100) {
                    this.ctx.strokeStyle = `rgba(167, 139, 250, ${0.1 - dist/1000})`;
                    this.ctx.lineWidth = 0.5;
                    this.ctx.beginPath();
                    this.ctx.moveTo(p.x, p.y);
                    this.ctx.lineTo(p2.x, p2.y);
                    this.ctx.stroke();
                }
            }
        }
        this.animationId = requestAnimationFrame(() => this.animate());
    },
    stop() { if(this.animationId) cancelAnimationFrame(this.animationId); }
};

/** Translations */
const Translations = {
    tr: {
        appTitle: "Dert SÄ±rdaÅŸÄ±m",
        appSubtitle: "Seninle konuÅŸmak iyi gelecek",
        labelAdvice: "DertleÅŸme",
        labelGossip: "GÄ±ybet",
        placeholder: "Yaz bakalÄ±m...",
        send: "GÃ–NDER",
        legalTitle: "Yasal UyarÄ±",
        legalText: "<p class='mb-2'><strong>1. YaÅŸ SÄ±nÄ±rÄ±:</strong> 18+ yaÅŸ gereklidir.</p><p class='mb-2'><strong>2. Sorumluluk Reddi:</strong> Bu bir AI simÃ¼lasyonudur. Profesyonel destek yerine geÃ§mez.</p><p class='mb-2'><strong>3. Etik:</strong> KÃ¼fÃ¼r ve yasadÄ±ÅŸÄ± iÃ§erik yasaktÄ±r.</p><p class='mb-2'><strong>4. Gizlilik:</strong> Veriler tarayÄ±cÄ±da saklanÄ±r.</p><p class='mb-2'><strong>5. RÄ±za:</strong> UygulamayÄ± kullanarak ÅŸartlarÄ± kabul edersiniz.</p>",
        legalBtn: "Okudum, AnladÄ±m & Kabul Ediyorum",
        clearHistoryMsg: "Sohbet geÃ§miÅŸini silmek konusunda emin misiniz?",
        introMature: "Merhabalar efendim. Sizi dinlemek iÃ§in buradayÄ±m.",
        introMale: "Selam dostum, hoÅŸ geldin.",
        introFemale: "Selam canÄ±m, hoÅŸ geldin.",
        introNeutral: "Merhaba, hoÅŸ geldiniz.",
        introSad: " Biraz Ã¼zgÃ¼n gÃ¶rÃ¼nÃ¼yorsunuz.",
        profileTitle: "Seni TanÄ±yalÄ±m",
        profileSubtitle: "YargÄ±sÄ±z, gÃ¼venli dert ortaÄŸÄ±n.",
        startBtn: "Sohbete BaÅŸla",
        
        gender: ["Cinsiyet", "KadÄ±n", "Erkek", "Belirtmek Ä°stemiyorum"],
        age: ["YaÅŸ AralÄ±ÄŸÄ±", "18 - 24", "25 - 34", "35 - 44", "45 - 54", "55 - 64", "65 - 74", "75 - 84", "85 ve Ã¼zeri"],
        job: ["Ne ile meÅŸgulsÃ¼n?", "Ã–ÄŸrenci", "Ã‡alÄ±ÅŸan", "Ä°ÅŸsiz", "Emekli", "Ev HanÄ±mÄ±"],
        relation: ["Ä°liÅŸki durumu", "Bekar", "Ä°liÅŸkisi Var", "NiÅŸanlÄ±/SÃ¶zlÃ¼", "Evli", "Dul/BoÅŸanmÄ±ÅŸ", "KarmaÅŸÄ±k"],
        mood: ["Åu an ruh halin nasÄ±l?", "Mutlu ğŸ˜ƒ", "ÃœzgÃ¼n ğŸ˜”", "KÄ±zgÄ±n ğŸ˜ ", "Yorgun ğŸ˜«", "EndiÅŸeli ğŸ˜°", "NÃ¶tr ğŸ˜"]
    },
    en: {
        appTitle: "Soul Confidant",
        appSubtitle: "It will feel good to talk",
        labelAdvice: "Vent",
        labelGossip: "Gossip",
        placeholder: "Type here...",
        send: "SEND",
        legalTitle: "Legal Disclaimer",
        legalText: "<p class='mb-2'><strong>1. Age Limit:</strong> 18+ required.</p><p class='mb-2'><strong>2. Disclaimer:</strong> This is an AI simulation. Not a substitute for professional help.</p><p class='mb-2'><strong>3. Ethics:</strong> No profanity or illegal content.</p><p class='mb-2'><strong>4. Privacy:</strong> Data stored locally.</p><p class='mb-2'><strong>5. Consent:</strong> By using the app, you accept these terms.</p>",
        legalBtn: "I Read, Understood & Accept",
        clearHistoryMsg: "Are you sure you want to clear the chat history?",
        introMature: "Hello there. I am here to listen to you.",
        introMale: "Hey buddy, welcome.",
        introFemale: "Hey dear, welcome.",
        introNeutral: "Hello, welcome.",
        introSad: " You seem a bit down.",
        profileTitle: "Let's Know You",
        profileSubtitle: "Your non-judgmental safe space.",
        startBtn: "Start Chat",

        gender: ["Gender?", "Female", "Male", "Prefer not to say"],
        age: ["Age Range?", "18 - 24", "25 - 34", "35 - 44", "45 - 54", "55 - 64", "65 - 74", "75 - 84", "85+"],
        job: ["Occupation?", "Student", "Employed", "Unemployed", "Retired", "Homemaker"],
        relation: ["Relationship Status?", "Single", "In a Relationship", "Engaged", "Married", "Divorced/Widowed", "Complicated"],
        mood: ["Current Mood?", "Happy ğŸ˜ƒ", "Sad ğŸ˜”", "Angry ğŸ˜ ", "Tired ğŸ˜«", "Anxious ğŸ˜°", "Neutral ğŸ˜"]
    },
    de: {
        appTitle: "Seelenverwandter",
        appSubtitle: "Es tut gut zu reden",
        labelAdvice: "AusschÃ¼tten",
        labelGossip: "Klatsch",
        placeholder: "Schreib hier...",
        send: "SENDEN",
        legalTitle: "Haftungsausschluss",
        legalText: "<p class='mb-2'><strong>1. Alter:</strong> 18+ erforderlich.</p><p class='mb-2'><strong>2. Haftung:</strong> KI-Simulation. Kein Ersatz fÃ¼r professionelle Hilfe.</p><p class='mb-2'><strong>3. Ethik:</strong> Keine ObszÃ¶nitÃ¤ten oder illegalen Inhalte.</p><p class='mb-2'><strong>4. Datenschutz:</strong> Daten lokal gespeichert.</p><p class='mb-2'><strong>5. Zustimmung:</strong> Durch die Nutzung akzeptieren Sie diese Bedingungen.</p>",
        legalBtn: "Gelesen & Akzeptiert",
        clearHistoryMsg: "Sind Sie sicher, dass Sie den Chatverlauf lÃ¶schen mÃ¶chten?",
        introMature: "Hallo. Ich bin hier, um zuzuhÃ¶ren.",
        introMale: "Hey Kumpel, willkommen.",
        introFemale: "Hallo meine Liebe, willkommen.",
        introNeutral: "Hallo, willkommen.",
        introSad: " Du scheinst etwas traurig zu sein.",
        profileTitle: "Dich Kennenlernen",
        profileSubtitle: "Dein urteilsfreier sicherer Raum.",
        startBtn: "Chat Starten",

        gender: ["Geschlecht?", "Weiblich", "MÃ¤nnlich", "Keine Angabe"],
        age: ["Altersgruppe?", "18 - 24", "25 - 34", "35 - 44", "45 - 54", "55 - 64", "65 - 74", "75 - 84", "85+"],
        job: ["Beruf?", "Student", "Angestellt", "Arbeitslos", "Rentner", "Hausfrau/mann"],
        relation: ["Beziehungsstatus?", "Single", "Vergeben", "Verlobt", "Verheiratet", "Geschieden/Verwitwet", "Kompliziert"],
        mood: ["Aktuelle Stimmung?", "GlÃ¼cklich ğŸ˜ƒ", "Traurig ğŸ˜”", "WÃ¼tend ğŸ˜ ", "MÃ¼de ğŸ˜«", "Ã„ngstlich ğŸ˜°", "Neutral ğŸ˜"]
    },
    fr: {
        appTitle: "Confident",
        appSubtitle: "Parler fait du bien",
        labelAdvice: "Confier",
        labelGossip: "Potins",
        placeholder: "Ã‰crivez ici...",
        send: "ENVOYER",
        legalTitle: "Avis LÃ©gal",
        legalText: "<p class='mb-2'><strong>1. Ã‚ge:</strong> 18+ requis.</p><p class='mb-2'><strong>2. Avis:</strong> Simulation IA. Ne remplace pas un pro.</p><p class='mb-2'><strong>3. Ã‰thique:</strong> Pas de grossiÃ¨retÃ©s ou contenu illÃ©gal.</p><p class='mb-2'><strong>4. ConfidentialitÃ©:</strong> DonnÃ©es stockÃ©es localement.</p><p class='mb-2'><strong>5. Consentement:</strong> En utilisant l'application, vous acceptez ces termes.</p>",
        legalBtn: "Lu et AcceptÃ©",
        clearHistoryMsg: "ÃŠtes-vous sÃ»r de vouloir effacer l'historique ?",
        introMature: "Bonjour. Je suis lÃ  pour Ã©couter.",
        introMale: "Salut l'ami, bienvenue.",
        introFemale: "Salut ma chÃ¨re, bienvenue.",
        introNeutral: "Bonjour, bienvenue.",
        introSad: " Vous semblez un peu triste.",
        profileTitle: "Faisons Connaissance",
        profileSubtitle: "Votre espace sÃ»r sans jugement.",
        startBtn: "Commencer",

        gender: ["Genre?", "Femme", "Homme", "Je prÃ©fÃ¨re ne pas dire"],
        age: ["Tranche d'Ã¢ge?", "18 - 24", "25 - 34", "35 - 44", "45 - 54", "55 - 64", "65 - 74", "75 - 84", "85+"],
        job: ["Occupation?", "Ã‰tudiant", "EmployÃ©", "ChÃ´meur", "RetraitÃ©", "Au foyer"],
        relation: ["Situation amoureuse?", "CÃ©libataire", "En couple", "FiancÃ©", "MariÃ©", "DivorcÃ©/Veuf", "CompliquÃ©"],
        mood: ["Humeur actuelle?", "Heureux ğŸ˜ƒ", "Triste ğŸ˜”", "En colÃ¨re ğŸ˜ ", "FatiguÃ© ğŸ˜«", "Anxieux ğŸ˜°", "Neutre ğŸ˜"]
    },
    es: {
        appTitle: "Confidente",
        appSubtitle: "Hablar te harÃ¡ bien",
        labelAdvice: "Desahogarse",
        labelGossip: "Chisme",
        placeholder: "Escribe aquÃ­...",
        send: "ENVIAR",
        legalTitle: "Aviso Legal",
        legalText: "<p class='mb-2'><strong>1. Edad:</strong> 18+.</p><p class='mb-2'><strong>2. Aviso:</strong> SimulaciÃ³n IA. No sustituye ayuda profesional.</p><p class='mb-2'><strong>3. Ã‰tica:</strong> Sin blasfemias o contenido ilegal.</p><p class='mb-2'><strong>4. Privacidad:</strong> Datos almacenados localmente.</p><p class='mb-2'><strong>5. Consentimiento:</strong> Al usar la aplicaciÃ³n, aceptas estos tÃ©rminos.</p>",
        legalBtn: "LeÃ­do y Aceptado",
        clearHistoryMsg: "Â¿EstÃ¡s seguro de que quieres borrar el historial?",
        introMature: "Hola. Estoy aquÃ­ para escuchar.",
        introMale: "Hola amigo, bienvenido.",
        introFemale: "Hola querida, bienvenida.",
        introNeutral: "Hola, bienvenido.",
        introSad: " Pareces un poco triste.",
        profileTitle: "ConozcÃ¡monos",
        profileSubtitle: "Tu espacio seguro sin juicios.",
        startBtn: "Iniciar Chat",

        gender: ["Â¿GÃ©nero?", "Mujer", "Hombre", "Prefiero no decir"],
        age: ["Rango de edad?", "18 - 24", "25 - 34", "35 - 44", "45 - 54", "55 - 64", "65 - 74", "75 - 84", "85+"],
        job: ["Â¿OcupaciÃ³n?", "Estudiante", "Empleado", "Desempleado", "Jubilado", "Ama de casa"],
        relation: ["Â¿Estado civil?", "Soltero", "En una relaciÃ³n", "Prometido", "Casado", "Divorciado/Viudo", "Complicado"],
        mood: ["Â¿Estado de Ã¡nimo?", "Feliz ğŸ˜ƒ", "Triste ğŸ˜”", "Enojado ğŸ˜ ", "Cansado ğŸ˜«", "Ansioso ğŸ˜°", "Neutral ğŸ˜"]
    },
    ru: {
        appTitle: "Ğ”ÑƒÑˆĞµĞ²Ğ½Ñ‹Ğ¹ Ğ”Ñ€ÑƒĞ³",
        appSubtitle: "Ğ Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€ Ğ¿Ğ¾Ğ¼Ğ¾Ğ¶ĞµÑ‚",
        labelAdvice: "Ğ’Ñ‹Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ÑŒÑÑ",
        labelGossip: "Ğ¡Ğ¿Ğ»ĞµÑ‚Ğ½Ğ¸",
        placeholder: "ĞĞ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ Ğ·Ğ´ĞµÑÑŒ...",
        send: "ĞĞ¢ĞŸĞ ĞĞ’Ğ˜Ğ¢Ğ¬",
        legalTitle: "ĞŸÑ€Ğ°Ğ²Ğ¾Ğ²Ğ¾Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ",
        legalText: "<p class='mb-2'><strong>1. Ğ’Ğ¾Ğ·Ñ€Ğ°ÑÑ‚:</strong> 18+.</p><p class='mb-2'><strong>2. ĞÑ‚ĞºĞ°Ğ·:</strong> Ğ˜Ğ˜-ÑĞ¸Ğ¼ÑƒĞ»ÑÑ†Ğ¸Ñ. ĞĞµ Ğ·Ğ°Ğ¼ĞµĞ½ÑĞµÑ‚ Ğ²Ñ€Ğ°Ñ‡Ğ°.</p><p class='mb-2'><strong>3. Ğ­Ñ‚Ğ¸ĞºĞ°:</strong> Ğ‘ĞµĞ· Ğ¼Ğ°Ñ‚Ğ° Ğ¸ Ğ½ĞµĞ»ĞµĞ³Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°.</p><p class='mb-2'><strong>4. ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ:</strong> Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾.</p><p class='mb-2'><strong>5. Ğ¡Ğ¾Ğ³Ğ»Ğ°ÑĞ¸Ğµ:</strong> Ğ’Ñ‹ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚Ğµ ÑÑ‚Ğ¸ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ.</p>",
        legalBtn: "ĞŸÑ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ» Ğ¸ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ñ",
        clearHistoryMsg: "Ğ’Ñ‹ ÑƒĞ²ĞµÑ€ĞµĞ½Ñ‹, Ñ‡Ñ‚Ğ¾ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ğ¾Ñ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ‡Ğ°Ñ‚Ğ°?",
        introMature: "Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ. Ğ¯ Ğ·Ğ´ĞµÑÑŒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²Ñ‹ÑĞ»ÑƒÑˆĞ°Ñ‚ÑŒ.",
        introMale: "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, Ğ´Ñ€ÑƒĞ³.",
        introFemale: "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ°Ñ.",
        introNeutral: "Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, Ğ´Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ.",
        introSad: " Ğ’Ñ‹ ĞºĞ°Ğ¶ĞµÑ‚ĞµÑÑŒ Ğ³Ñ€ÑƒÑÑ‚Ğ½Ñ‹Ğ¼.",
        profileTitle: "Ğ”Ğ°Ğ²Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ğ¾Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼Ğ¸Ğ¼ÑÑ",
        profileSubtitle: "Ğ’Ğ°ÑˆĞµ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ¾.",
        startBtn: "ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ñ‡Ğ°Ñ‚",
        gender: ["ĞŸĞ¾Ğ»?", "Ğ–ĞµĞ½ÑĞºĞ¸Ğ¹", "ĞœÑƒĞ¶ÑĞºĞ¾Ğ¹", "ĞĞµ Ñ…Ğ¾Ñ‡Ñƒ ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ"],
        age: ["Ğ’Ğ¾Ğ·Ñ€Ğ°ÑÑ‚?", "18-24", "25-34", "35-44", "45-54", "55-64", "65-74", "75-84", "85+"],
        job: ["Ğ—Ğ°Ğ½ÑÑ‚Ğ¾ÑÑ‚ÑŒ?", "Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚", "Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ", "Ğ‘ĞµĞ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ñ‹Ğ¹", "ĞŸĞµĞ½ÑĞ¸Ğ¾Ğ½ĞµÑ€", "Ğ”Ğ¾Ğ¼Ğ¾Ñ…Ğ¾Ğ·ÑĞ¹ĞºĞ°"],
        relation: ["ĞÑ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ?", "Ğ¥Ğ¾Ğ»Ğ¾ÑÑ‚/ĞĞµ Ğ·Ğ°Ğ¼ÑƒĞ¶ĞµĞ¼", "Ğ’ Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸ÑÑ…", "ĞŸĞ¾Ğ¼Ğ¾Ğ»Ğ²Ğ»ĞµĞ½(Ğ°)", "Ğ–ĞµĞ½Ğ°Ñ‚/Ğ—Ğ°Ğ¼ÑƒĞ¶ĞµĞ¼", "Ğ Ğ°Ğ·Ğ²ĞµĞ´ĞµĞ½(Ğ°)/Ğ’Ğ´Ğ¾Ğ²ĞµÑ†", "Ğ’ÑĞµ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾"],
        mood: ["ĞĞ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ?", "Ğ¡Ñ‡Ğ°ÑÑ‚Ğ»Ğ¸Ğ² ğŸ˜ƒ", "Ğ“Ñ€ÑƒÑÑ‚Ğ½Ñ‹Ğ¹ ğŸ˜”", "Ğ—Ğ»Ğ¾Ğ¹ ğŸ˜ ", "Ğ£ÑÑ‚Ğ°Ğ»Ñ‹Ğ¹ ğŸ˜«", "Ğ¢Ñ€ĞµĞ²Ğ¾Ğ¶Ğ½Ñ‹Ğ¹ ğŸ˜°", "ĞĞ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ ğŸ˜"]
    },
    ja: {
        appTitle: "å¿ƒã®å‹",
        appSubtitle: "è©±ã™ã“ã¨ã§æ¥½ã«ãªã‚Šã¾ã™",
        labelAdvice: "ç›¸è«‡",
        labelGossip: "å™‚è©±",
        placeholder: "ã“ã“ã«å…¥åŠ›...",
        send: "é€ä¿¡",
        legalTitle: "å…è²¬äº‹é …",
        legalText: "<p class='mb-2'><strong>1. å¹´é½¢:</strong> 18æ­³ä»¥ä¸Šã€‚</p><p class='mb-2'><strong>2. å…è²¬:</strong> AIã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚å°‚é–€å®¶ã®ä»£ã‚ã‚Šã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚</p><p class='mb-2'><strong>3. å€«ç†:</strong> å†’æ¶œã‚„é•æ³•ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ç¦æ­¢ã§ã™ã€‚</p><p class='mb-2'><strong>4. ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼:</strong> ãƒ‡ãƒ¼ã‚¿ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚</p><p class='mb-2'><strong>5. åŒæ„:</strong> ã‚¢ãƒ—ãƒªã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã“ã‚Œã‚‰ã®æ¡ä»¶ã«åŒæ„ã—ãŸã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p>",
        legalBtn: "åŒæ„ã—ã¦é–‹å§‹",
        clearHistoryMsg: "ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã‚’æ¶ˆå»ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ",
        introMature: "ã“ã‚“ã«ã¡ã¯ã€‚ãŠè©±ã‚’èã‹ã›ã¦ãã ã•ã„ã€‚",
        introMale: "ã‚ˆã†ã“ãã€å‹ã‚ˆã€‚",
        introFemale: "ã‚ˆã†ã“ãã€‚",
        introNeutral: "ã“ã‚“ã«ã¡ã¯ã€ã‚ˆã†ã“ãã€‚",
        introSad: " å°‘ã—æ‚²ã—ãã†ã§ã™ã­ã€‚",
        profileTitle: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«",
        profileSubtitle: "ã‚ãªãŸã®å®‰å…¨ãªå ´æ‰€ã§ã™ã€‚",
        startBtn: "ãƒãƒ£ãƒƒãƒˆã‚’é–‹å§‹",
        gender: ["æ€§åˆ¥?", "å¥³æ€§", "ç”·æ€§", "å›ç­”ã—ãªã„"],
        age: ["å¹´é½¢?", "18-24", "25-34", "35-44", "45-54", "55-64", "65-74", "75-84", "85+"],
        job: ["è·æ¥­?", "å­¦ç”Ÿ", "ä¼šç¤¾å“¡", "ç„¡è·", "é€€è·", "ä¸»å©¦/ä¸»å¤«"],
        relation: ["äº¤éš›ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹?", "ç‹¬èº«", "äº¤éš›ä¸­", "å©šç´„ä¸­", "æ—¢å©š", "é›¢å©š/æ­»åˆ¥", "è¤‡é›‘"],
        mood: ["æ°—åˆ†?", "å¹¸ã› ğŸ˜ƒ", "æ‚²ã—ã„ ğŸ˜”", "æ€’ã‚Š ğŸ˜ ", "ç–²ã‚ŒãŸ ğŸ˜«", "ä¸å®‰ ğŸ˜°", "æ™®é€š ğŸ˜"]
    },
    pt: {
        appTitle: "Confidente da Alma",
        appSubtitle: "Falar vai te fazer bem",
        labelAdvice: "Desabafar",
        labelGossip: "Fofoca",
        placeholder: "Digite aqui...",
        send: "ENVIAR",
        legalTitle: "Aviso Legal",
        legalText: "<p class='mb-2'><strong>1. Idade:</strong> 18+.</p><p class='mb-2'><strong>2. Aviso:</strong> SimulaÃ§Ã£o de IA. NÃ£o substitui ajuda profissional.</p><p class='mb-2'><strong>3. Ã‰tica:</strong> Sem palavrÃµes ou conteÃºdo ilegal.</p><p class='mb-2'><strong>4. Privacidade:</strong> Dados armazenados localmente.</p><p class='mb-2'><strong>5. Consentimento:</strong> Ao usar o aplicativo, vocÃª aceita estes termos.</p>",
        legalBtn: "Li e Aceito",
        clearHistoryMsg: "Tem certeza de que deseja limpar o histÃ³rico?",
        introMature: "OlÃ¡. Estou aqui para ouvir.",
        introMale: "E aÃ­ amigo, bem-vindo.",
        introFemale: "OlÃ¡ querida, bem-vinda.",
        introNeutral: "OlÃ¡, bem-vindo.",
        introSad: " VocÃª parece um pouco triste.",
        profileTitle: "Vamos te conhecer",
        profileSubtitle: "Seu espaÃ§o seguro sem julgamentos.",
        startBtn: "Iniciar Chat",
        gender: ["GÃªnero?", "Feminino", "Masculino", "Prefiro nÃ£o dizer"],
        age: ["Faixa EtÃ¡ria?", "18-24", "25-34", "35-44", "45-54", "55-64", "65-74", "75-84", "85+"],
        job: ["OcupaÃ§Ã£o?", "Estudante", "Empregado", "Desempregado", "Aposentado", "Do lar"],
        relation: ["Relacionamento?", "Solteiro", "Em um relacionamento", "Noivo", "Casado", "Divorciado/ViÃºvo", "Complicado"],
        mood: ["Humor?", "Feliz ğŸ˜ƒ", "Triste ğŸ˜”", "Com raiva ğŸ˜ ", "Cansado ğŸ˜«", "Ansioso ğŸ˜°", "Neutro ğŸ˜"]
    },
    ar: {
        appTitle: "Ø±ÙÙŠÙ‚ Ø§Ù„Ø±ÙˆØ­",
        appSubtitle: "Ø§Ù„ØªØ­Ø¯Ø« Ø³ÙŠØ¬Ø¹Ù„Ùƒ ØªØ´Ø¹Ø± Ø¨ØªØ­Ø³Ù†",
        labelAdvice: "ÙØ¶ÙØ¶Ø©",
        labelGossip: "Ø¯Ø±Ø¯Ø´Ø©",
        placeholder: "Ø§ÙƒØªØ¨ Ù‡Ù†Ø§...",
        send: "Ø¥Ø±Ø³Ø§Ù„",
        legalTitle: "Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©",
        legalText: "<p class='mb-2'><strong>1. Ø§Ù„Ø¹Ù…Ø±:</strong> 18+.</p><p class='mb-2'><strong>2. ØªÙ†Ø¨ÙŠÙ‡:</strong> Ù…Ø­Ø§ÙƒØ§Ø© Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.</p><p class='mb-2'><strong>3. Ø§Ù„Ø£Ø®Ù„Ø§Ù‚:</strong> Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø´ØªØ§Ø¦Ù… ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ ØºÙŠØ± Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ.</p><p class='mb-2'><strong>4. Ø§Ù„Ø®ØµÙˆØµÙŠØ©:</strong> Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹.</p><p class='mb-2'><strong>5. Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©:</strong> Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ ÙØ¥Ù†Ùƒ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ·.</p>",
        legalBtn: "Ù‚Ø±Ø£Øª ÙˆØ£ÙˆØ§ÙÙ‚",
        clearHistoryMsg: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ØŸ",
        introMature: "Ù…Ø±Ø­Ø¨Ø§Ù‹. Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ø¥Ù„ÙŠÙƒ.",
        introMale: "Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ ØµØ¯ÙŠÙ‚ÙŠ.",
        introFemale: "Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ Ø¹Ø²ÙŠØ²ØªÙŠ.",
        introNeutral: "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ.",
        introSad: " ØªØ¨Ø¯Ùˆ Ø­Ø²ÙŠÙ†Ø§Ù‹ Ù‚Ù„ÙŠÙ„Ø§Ù‹.",
        profileTitle: "Ù„Ù†ØªØ¹Ø±Ù Ø¹Ù„ÙŠÙƒ",
        profileSubtitle: "Ù…Ø³Ø§Ø­ØªÙƒ Ø§Ù„Ø¢Ù…Ù†Ø©.",
        startBtn: "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©",
        gender: ["Ø§Ù„Ø¬Ù†Ø³ØŸ", "Ø£Ù†Ø«Ù‰", "Ø°ÙƒØ±", "Ù„Ø§ Ø£Ø±ÙŠØ¯ Ø§Ù„ØªØ­Ø¯ÙŠØ¯"],
        age: ["Ø§Ù„Ø¹Ù…Ø±ØŸ", "18-24", "25-34", "35-44", "45-54", "55-64", "65-74", "75-84", "85+"],
        job: ["Ø§Ù„Ø¹Ù…Ù„ØŸ", "Ø·Ø§Ù„Ø¨", "Ù…ÙˆØ¸Ù", "Ø¹Ø·Ù„", "Ù…ØªÙ‚Ø§Ø¹Ø¯", "Ø±Ø¨Ø© Ù…Ù†Ø²Ù„"],
        relation: ["Ø§Ù„Ø­Ø§Ù„Ø©ØŸ", "Ø£Ø¹Ø²Ø¨", "Ù…Ø±ØªØ¨Ø·", "Ù…Ø®Ø·ÙˆØ¨", "Ù…ØªØ²ÙˆØ¬", "Ù…Ø·Ù„Ù‚/Ø£Ø±Ù…Ù„", "Ù…Ø¹Ù‚Ø¯"],
        mood: ["Ø§Ù„Ù…Ø²Ø§Ø¬ØŸ", "Ø³Ø¹ÙŠØ¯ ğŸ˜ƒ", "Ø­Ø²ÙŠÙ† ğŸ˜”", "ØºØ§Ø¶Ø¨ ğŸ˜ ", "Ù…ØªØ¹Ø¨ ğŸ˜«", "Ù‚Ù„Ù‚ ğŸ˜°", "Ø¹Ø§Ø¯ÙŠ ğŸ˜"]
    },
    zh: {
        appTitle: "å¿ƒçµçŸ¥å·±",
        appSubtitle: "å€¾è¯‰è®©ä½ æ›´è½»æ¾",
        labelAdvice: "å€¾è¯‰",
        labelGossip: "å…«å¦",
        placeholder: "åœ¨æ­¤è¾“å…¥...",
        send: "å‘é€",
        legalTitle: "æ³•å¾‹å…è´£å£°æ˜",
        legalText: "<p class='mb-2'><strong>1. å¹´é¾„:</strong> 18+.</p><p class='mb-2'><strong>2. å…è´£:</strong> AIæ¨¡æ‹Ÿã€‚ä¸ä»£æ›¿ä¸“ä¸šå¸®åŠ©ã€‚</p><p class='mb-2'><strong>3. é“å¾·:</strong> ç¦æ­¢äºµæ¸æˆ–éæ³•å†…å®¹ã€‚</p><p class='mb-2'><strong>4. éšç§:</strong> æ•°æ®æœ¬åœ°å­˜å‚¨ã€‚</p><p class='mb-2'><strong>5. åŒæ„:</strong> ä½¿ç”¨è¯¥åº”ç”¨ç¨‹åºå³è¡¨ç¤ºæ‚¨æ¥å—è¿™äº›æ¡æ¬¾ã€‚</p>",
        legalBtn: "é˜…è¯»å¹¶æ¥å—",
        clearHistoryMsg: "æ‚¨ç¡®å®šè¦æ¸…é™¤èŠå¤©è®°å½•å—ï¼Ÿ",
        introMature: "ä½ å¥½ã€‚æˆ‘åœ¨è¿™é‡Œå€¾å¬ã€‚",
        introMale: "å˜¿ä¼™è®¡ï¼Œæ¬¢è¿ã€‚",
        introFemale: "å˜¿äº²çˆ±çš„ï¼Œæ¬¢è¿ã€‚",
        introNeutral: "ä½ å¥½ï¼Œæ¬¢è¿ã€‚",
        introSad: " ä½ çœ‹èµ·æ¥æœ‰ç‚¹æ²®ä¸§ã€‚",
        profileTitle: "äº†è§£ä½ ",
        profileSubtitle: "ä½ çš„æ— è¯„åˆ¤å®‰å…¨ç©ºé—´ã€‚",
        startBtn: "å¼€å§‹èŠå¤©",
        gender: ["æ€§åˆ«?", "å¥³", "ç”·", "ä¸æ„¿é€éœ²"],
        age: ["å¹´é¾„?", "18-24", "25-34", "35-44", "45-54", "55-64", "65-74", "75-84", "85+"],
        job: ["èŒä¸š?", "å­¦ç”Ÿ", "åœ¨èŒ", "å¾…ä¸š", "é€€ä¼‘", "å®¶åº­ä¸»å¦‡/å¤«"],
        relation: ["æƒ…æ„ŸçŠ¶æ€?", "å•èº«", "æ‹çˆ±ä¸­", "è®¢å©š", "å·²å©š", "ç¦»å¼‚/ä¸§å¶", "å¤æ‚"],
        mood: ["å¿ƒæƒ…?", "å¿«ä¹ ğŸ˜ƒ", "æ‚²ä¼¤ ğŸ˜”", "ç”Ÿæ°” ğŸ˜ ", "ç–²æƒ« ğŸ˜«", "ç„¦è™‘ ğŸ˜°", "å¹³æ·¡ ğŸ˜"]
    }
};

const AIController = {
    history: [], userProfile: {}, genderMode: 'female',
    loadData() {
        try {
            const h = localStorage.getItem('ds_history_v3'); if(h) this.history = JSON.parse(h);
            const p = localStorage.getItem('ds_profile_v3'); if(p) this.userProfile = JSON.parse(p);
            return !!p;
        } catch(e) { return false; }
    },
    saveProfile(p) { localStorage.setItem('ds_profile_v3', JSON.stringify(p)); this.userProfile = p; },
    saveHistory() { localStorage.setItem('ds_history_v3', JSON.stringify(this.history)); },
    clear() { this.history = []; localStorage.removeItem('ds_history_v3'); },
    
    getPersonas(profile) {
        const lang = profile.language || 'tr';
        const age = profile.age || "25+";
        let role = "Friend";
        if(this.genderMode === 'male') role = "Brotherly";
        if(this.genderMode === 'female') role = "Sisterly";
        const addr = age.includes('18-24') ? "Use 'sen' (informal)." : "Use 'siz' (formal).";

        const sys = `Role: ${role} Confidant. Lang: ${lang}. Profile: ${JSON.stringify(profile)}. 
        ${addr} Be supportive. Max 3 sentences. No repetitive greetings if chat exists.`;
        return { advice: sys, gossip: sys + " Tone: Gossip/Fun." };
    },

    async generate(text, mode) {
        if(!apiKey) return "NO_KEY";
        const sys = this.getPersonas(this.userProfile)[mode];
        const contents = [{ role: "user", parts: [{ text: sys }] }, ...this.history, { role: "user", parts: [{ text: text }] }];

        try {
            // Using gemini-2.5-flash which is generally stable
            const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${apiKey}`, {
                method: 'POST', headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ contents, safetySettings: [{ category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_NONE" }, { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_NONE" }, { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_NONE" }, { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_NONE" }] })
            });
            if(!res.ok) { const e = await res.json().catch(()=>({})); return `API ERROR: ${e.error?.message || res.status}`; }
            const d = await res.json();
            if(!d.candidates) return "No response.";
            const reply = d.candidates[0].content.parts[0].text;
            this.history.push({ role: "user", parts: [{ text }] });
            this.history.push({ role: "model", parts: [{ text: reply }] });
            if(this.history.length>20) this.history = this.history.slice(-20);
            this.saveHistory();
            return reply;
        } catch(e) { return "CONN ERR: " + e.message; }
    },
    addUserMessage(t) { this.history.push({ role: "user", parts: [{ text: t }] }); this.saveHistory(); }
};

/** App Logic */
const app = {
    lang: 'tr', currentMode: 'advice',
    init() {
        this.chatBox = document.getElementById('chatBox');
        this.input = document.getElementById('userInput');
        try { CanvasEffect.init(); } catch(e) {}
        this.input.addEventListener('input', () => { if(this.sendTimeout) { clearTimeout(this.sendTimeout); this.sendTimeout = null; this.removeTyping(); } });
        
        const hasProfile = AIController.loadData();
        setTimeout(() => {
            const sp = document.getElementById('splashScreen');
            if(sp) { sp.classList.add('fade-out'); setTimeout(() => sp.style.display = 'none', 600); }
            this.checkFlow(hasProfile);
        }, 2000);
    },

    checkFlow(hasProfile) {
        if(!apiKey) { alert("API Key Eksik! LÃ¼tfen kodun iÃ§indeki apiKey deÄŸiÅŸkenine anahtarÄ±nÄ±zÄ± girin."); return; }
        const modal = document.getElementById('legalModal');
        modal.classList.add('active');
        if(hasProfile && AIController.userProfile.language) {
            this.lang = AIController.userProfile.language;
            const sel = document.getElementById('legalLangSelect');
            if(sel) sel.value = this.lang;
        }
        this.updateLang(this.lang);
    },

    changeAppLanguage(val) { this.lang = val; this.updateLang(val); },

    updateLang(l) {
        const t = Translations[l] || Translations['tr'];
        if(!t) return;
        const setT = (id, v) => { const el = document.getElementById(id); if(el) el.innerText = v; };
        const setH = (id, v) => { const el = document.getElementById(id); if(el) el.innerHTML = v; };

        setT('legalTitle', t.legalTitle); setH('legalTextContent', t.legalText); setT('legalBtn', t.legalBtn);
        setT('profileTitle', t.profileTitle); setT('profileSubtitle', t.profileSubtitle); setH('startBtn', `${t.startBtn} <i class="fa-solid fa-arrow-right ml-2"></i>`);
        setT('appTitle', t.appTitle); setT('appSubtitle', t.appSubtitle); setT('labelAdvice', t.labelAdvice); setT('labelGossip', t.labelGossip);
        const inp = document.getElementById('userInput'); if(inp) inp.placeholder = t.placeholder;

        this.fillSelect('userGender', t.gender);
        this.fillSelect('userAge', t.age);
        this.fillSelect('userJob', t.job);
        this.fillSelect('userRelation', t.relation);
        this.fillSelect('userMood', t.mood);

        if(l==='ar') document.body.classList.add('lang-ar'); else document.body.classList.remove('lang-ar');
    },

    fillSelect(id, opts) {
        const sel = document.getElementById(id);
        if(!sel) return;
        if(!Array.isArray(opts)) return;
        const idx = sel.selectedIndex;
        sel.innerHTML = '';
        opts.forEach((o, i) => {
            const op = document.createElement('option');
            op.value = o; op.innerText = o;
            if(i===0) { op.disabled = true; op.selected = true; }
            sel.add(op);
        });
        if(idx > 0 && idx < opts.length) sel.selectedIndex = idx;
    },

    acceptLegal() {
        this.lang = document.getElementById('legalLangSelect').value;
        document.getElementById('legalModal').classList.remove('active');
        
        if(AIController.userProfile && AIController.userProfile.age) {
            AIController.userProfile.language = this.lang;
            AIController.saveProfile(AIController.userProfile);
            this.updateLang(this.lang);
            this.prefillProfile();
            this.updateBranding(AIController.genderMode);
            
            if(AIController.history.length > 0) this.restoreChat();
            else {
                setTimeout(() => {
                    const t = Translations[this.lang] || Translations['tr'];
                    this.addBubble(t.intro, 'ai');
                }, 500);
            }
        } else {
            this.updateLang(this.lang);
            document.getElementById('profileModal').classList.remove('hidden');
            document.getElementById('profileModal').classList.add('active');
        }
    },

    prefillProfile() {
        const p = AIController.userProfile;
        if(!p) return;
        if(p.gender) this.handleGenderChange(p.gender);
    },

    handleGenderChange(val) {
        const icon = document.getElementById('introIcon');
        const btn = document.getElementById('startBtn');
        const job = document.getElementById('userJob');
        
        if(!icon) return;

        icon.className = "w-16 h-16 rounded-full flex items-center justify-center text-white font-bold text-2xl shadow-xl mx-auto mb-3 transition-colors duration-500";
        btn.className = "w-full text-white font-bold py-3 px-6 rounded-xl shadow-lg transform transition hover:scale-105 mt-2";
        
        const isM = val.toLowerCase().includes('erkek') || val.toLowerCase().includes('male') || val.toLowerCase().includes('mÃ¤nnlich');
        const isF = val.toLowerCase().includes('kadÄ±n') || val.toLowerCase().includes('female');

        // Reset list first
        const t = Translations[this.lang] || Translations['tr'];
        this.fillSelect('userJob', t.job);

        if(isM) {
            icon.classList.add('bg-gradient-to-br', 'from-blue-600', 'to-cyan-600');
            btn.classList.add('bg-gradient-to-r', 'from-blue-600', 'to-cyan-600', 'hover:from-blue-500', 'hover:to-cyan-500');
            
            if(job) {
                for(let i=0; i<job.options.length; i++) {
                    const txt = job.options[i].value;
                    if(txt.includes('HanÄ±m') || txt.includes('Homemaker') || txt.includes('Hausfrau')) {
                        job.remove(i);
                        i--;
                    }
                }
            }
            AIController.genderMode = 'male';
        } else {
            if(isF) {
                icon.classList.add('bg-gradient-to-br', 'from-pink-500', 'to-purple-600');
                btn.classList.add('bg-gradient-to-r', 'from-pink-600', 'to-purple-600', 'hover:from-pink-500', 'hover:to-purple-500');
                AIController.genderMode = 'female';
            } else {
                icon.classList.add('bg-gradient-to-br', 'from-indigo-500', 'to-violet-600');
                btn.classList.add('bg-gradient-to-r', 'from-indigo-600', 'to-violet-600', 'hover:from-indigo-500', 'hover:to-violet-500');
                AIController.genderMode = 'neutral';
            }
        }
    },

    submitProfile() {
        const g = document.getElementById('userGender').value;
        const a = document.getElementById('userAge').value;
        if(document.getElementById('userAge').selectedIndex === 0) { alert("LÃ¼tfen tÃ¼m alanlarÄ± doldurun."); return; }
        
        const p = { gender:g, age:a, language:this.lang, 
            job:document.getElementById('userJob').value, 
            relation:document.getElementById('userRelation').value, 
            mood:document.getElementById('userMood').value 
        };
        AIController.saveProfile(p);
        
        this.updateBranding(AIController.genderMode);
        document.getElementById('profileModal').classList.remove('active');
        document.getElementById('profileModal').classList.add('hidden');
        
        setTimeout(() => {
            const t = Translations[this.lang] || Translations['tr'];
            let txt = t.intro;
            if(p.mood.includes('ÃœzgÃ¼n') || p.mood.includes('Sad')) txt += " ğŸ˜”";
            this.addBubble(txt, 'ai');
        }, 800);
    },

    updateBranding(mode) {
        const h = document.getElementById('headerIconContainer');
        const b = document.getElementById('sendBtn');
        const i = document.getElementById('userInput');
        
        h.className = "w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg relative transition-colors duration-500";
        b.className = "send-btn-custom text-white";
        i.className = "w-full bg-gray-800 text-white rounded-xl px-4 py-3 border border-gray-600 outline-none resize-none text-sm";

        if(mode === 'male') {
            h.classList.add('bg-gradient-to-br', 'from-blue-600', 'to-cyan-600');
            b.classList.add('bg-blue-600');
            i.classList.add('focus:border-blue-500');
        } else if(mode === 'female') {
            h.classList.add('bg-gradient-to-br', 'from-pink-500', 'to-purple-600');
            b.classList.add('bg-pink-600');
            i.classList.add('focus:border-pink-500');
        } else {
            h.classList.add('bg-gradient-to-br', 'from-indigo-500', 'to-violet-600');
            b.classList.add('bg-indigo-600');
            i.classList.add('focus:border-indigo-500');
        }
    },

    clearChatHistory() {
        const t = Translations[this.lang] || Translations['tr'];
        if(confirm(t.clearMsg)) { AIController.clear(); document.getElementById('chatBox').innerHTML = ''; }
    },

    restoreChat() {
        const h = AIController.history;
        const box = document.getElementById('chatBox');
        box.innerHTML = '';
        h.forEach(m => {
            const r = m.role==='user'?'user':'ai';
            if(m.parts && m.parts[0].text) this.addBubble(m.parts[0].text, r, true);
        });
        setTimeout(() => this.scrollToBottom(), 100);
    },

    setMode(m) {
        this.currentMode = m;
        document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
        if(m==='advice') document.getElementById('btnAdvice').classList.add('active');
        else document.getElementById('btnGossip').classList.add('active');
    },

    async sendMessage() {
        const txt = this.input.value.trim();
        if(!txt) return;
        this.addBubble(txt, 'user');
        this.input.value = '';
        AIController.addUserMessage(txt);
        
        const tid = 't-'+Date.now();
        this.showTyping(tid);
        
        const res = await AIController.generate(txt, this.currentMode);
        const te = document.getElementById(tid); if(te) te.remove();
        
        if(res.includes("ERROR") || res.includes("NO_KEY")) { alert(res); return; }
        this.addBubble(res, 'ai');
    },

    addBubble(txt, type, noAnim) {
        const box = document.getElementById('chatBox');
        const div = document.createElement('div');
        div.className = "message-container";
        
        const b = document.createElement('div');
        b.className = `message ${type}`;
        if(noAnim) b.style.animation = 'none';
        b.innerHTML = txt.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>');
        div.appendChild(b);
        
        if(type==='ai' || type==='giybet') {
            const fb = document.createElement('div');
            fb.className = 'feedback-container';
            fb.innerHTML = `<i class="fa-regular fa-thumbs-up fb-btn" onclick="this.classList.toggle('active-like')"></i><i class="fa-regular fa-thumbs-down fb-btn" onclick="this.classList.toggle('active-dislike')"></i>`;
            if(!noAnim) div.appendChild(fb);
        }
        
        box.appendChild(div);
        this.scrollToBottom();
    },

    showTyping(id) {
        const box = document.getElementById('chatBox');
        const d = document.createElement('div'); d.id = id;
        d.className = "message ai opacity-50"; d.style.width="60px";
        d.innerHTML = '<div class="typing-dots"><span></span><span></span><span></span></div>';
        box.appendChild(d);
        this.scrollToBottom();
    },
    removeTyping() { /* handled by IDs */ },
    scrollToBottom() { const b = document.getElementById('chatBox'); b.scrollTop = b.scrollHeight; }
};

window.onload = () => app.init();
</script>
</body>
</html>
